<html>
  <head>
    <title>Test of the Subway Map SVG</title>
  </head>
  <body bgcolor=white>
		<script type="text/javascript">
            <script src="http://d3js.org/d3.v3.min.js"></script>
			<script src="js/subwaymap.js"></script>
        </script>
		
		<div class="container">
			<h1>Homework 3 - MyWorld 2015 Data Visualization</h1>

			<div class="row">
				<div class="col-md-8" id="subwayMap">
				   
				</div>

			</div>
		</div>
		
		<script>
		$(function(){ // this function is called after the HTML document is fully loaded
		
			asyncDataLoad();
			
			function asyncDataLoad(){
                queue().defer(d3.json, 'processing/station_map.json')
                  .defer(d3.json, 'processing/station_series.json')
                  .await(dataLoaded);
            }
			
			
			// error should be "null" if no error
            function dataLoaded(error, _allData, _metaData) {

                if (!error) {

                    metaData = _metaData;
                    initVis();
                }
            }
			
			
			function initVis(){

                //Create an eventHandler placeholder (to be filled in later)
                var MyEventHandler = new Object();

                var selectedStation = null; 		// brush selection
                // Instantiate all Vis Objects here
                var subwayMap = new SubwayMap(d3.select("#subwayMap"), allData, metaData, MyEventHandler);


                // bind the eventHandler to the things related to map
				$(MyEventHandler).bind("selectionChange", function(event, startDate, endDate){
                  //anotherVis.onSelectionChange(startDate, endDate);
                });
            }
		
		});
		
		</script>
  </body>
</html>